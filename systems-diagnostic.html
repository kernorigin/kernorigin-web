<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Systems Diagnostic | Kernorigin</title>
    <link rel="stylesheet" href="style.css">
    <style>
        /* Additional styles specific to systems diagnostic page */
        .hero-systems {
            background: linear-gradient(135deg, var(--accent-navy) 0%, #003366 100%);
            color: white;
            padding: 80px 0;
            text-align: center;
        }
        .hero-systems h1 { color: white; }
        .hero-systems p { color: rgba(255,255,255,0.9); }
        
        .diagnostic-form-wrapper {
            max-width: 800px;
            margin: -50px auto 0;
            position: relative;
            z-index: 10;
        }
        
        .form-section {
            margin-bottom: 40px;
            padding-bottom: 40px;
            border-bottom: 1px solid var(--border-light);
        }
        .form-section:last-child {
            border-bottom: none;
            margin-bottom: 0;
        }
        .form-section h3 {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-bottom: 25px;
        }
        .section-number {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            width: 32px;
            height: 32px;
            background: var(--accent-gold);
            color: white;
            border-radius: 50%;
            font-weight: bold;
            font-size: 0.9rem;
        }
        .question-item {
            margin-bottom: 20px;
        }
        .question-help {
            font-size: 0.85rem;
            color: var(--text-muted);
            margin-top: 5px;
            font-style: italic;
        }
        .process-step {
            text-align: center;
            padding: 30px 20px;
        }
        .step-badge {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            width: 50px;
            height: 50px;
            background: var(--accent-navy);
            color: white;
            border-radius: 50%;
            font-size: 1.5rem;
            font-weight: bold;
            margin-bottom: 20px;
        }
        .recommendation-card {
            padding: 25px;
            border-radius: 4px;
            border-top: 4px solid var(--accent-gold);
        }
        .recommendation-card.build { border-top-color: #4caf50; }
        .recommendation-card.consult { border-top-color: #ff9800; }
        .recommendation-card.hybrid { border-top-color: #2196f3; }
        
        @media (max-width: 768px) {
            .diagnostic-form-wrapper {
                margin: -30px 20px 0;
            }
        }
    </style>
</head>
<body>

    <header>
        <div class="container nav-wrapper">
            <a href="index.html" class="logo">Kernorigin</a>
            <nav>
                <ul>
                    <li><a href="index.html">Home</a></li>
                    <li><a href="how-we-think.html">How We Think</a></li>
                    <li><a href="how-we-work.html">How We Work</a></li>
                    <li><a href="impact.html">Impact</a></li>
                    <li><a href="team.html">Team</a></li>
                    <li><a href="insights.html">Insights</a></li>
                    <li><a href="contact.html">Contact</a></li>
                </ul>
            </nav>
        </div>
    </header>

    <main>
        <!-- HERO -->
        <section class="hero-systems">
            <div class="container readable-column">
                <span class="eyebrow" style="color: rgba(255,255,255,0.8);">Strategic Systems Development</span>
                <h1>Most businesses automate broken processes.<br>We fix the root cause first.</h1>
                <p style="font-size: 1.1rem; max-width: 700px; margin: 20px auto 0;">Before we build anything, we diagnose the real problem. Then we recommend the right solution: custom software, strategy consulting, or both.</p>
            </div>
        </section>

        <!-- DIAGNOSTIC FORM -->
        <section class="section-padding">
            <div class="container">
                <div class="diagnostic-form-wrapper">
                    <div class="card" style="box-shadow: 0 10px 40px rgba(0,0,0,0.1);">
                        <div style="text-align: center; margin-bottom: 40px;">
                            <h2>Systems Diagnostic</h2>
                            <p style="color: var(--text-muted); margin-bottom: 0;">15 questions · 5-10 minutes · Immediate results via email</p>
                        </div>

                        <form id="systemsDiagnosticForm" onsubmit="submitSystemsDiagnostic(event)">
                            <!-- SECTION 1: Contact Info -->
                            <div class="form-section">
                                <h3><span class="section-number">1</span> Contact Information</h3>
                                
                                <div class="question-item">
                                    <label for="clientName">Your Name *</label>
                                    <input type="text" id="clientName" name="clientName" required placeholder="Full name">
                                </div>

                                <div class="question-item">
                                    <label for="clientEmail">Email Address *</label>
                                    <input type="email" id="clientEmail" name="clientEmail" required placeholder="your@email.com">
                                    <div class="question-help">We'll send your diagnostic report here</div>
                                </div>

                                <div class="question-item">
                                    <label for="businessType">Business Type *</label>
                                    <input type="text" id="businessType" name="businessType" required placeholder="e.g., Professional Services, SaaS, Education">
                                </div>

                                <div class="question-item">
                                    <label for="location">Location</label>
                                    <select id="location" name="location">
                                        <option value="Bangalore">Bangalore</option>
                                        <option value="Mumbai">Mumbai</option>
                                        <option value="Delhi">Delhi</option>
                                        <option value="Chennai">Chennai</option>
                                        <option value="Hyderabad">Hyderabad</option>
                                        <option value="Pune">Pune</option>
                                        <option value="Other">Other</option>
                                    </select>
                                </div>
                            </div>

                            <!-- SECTION 2: Process Questions -->
                            <div class="form-section">
                                <h3><span class="section-number">2</span> Current Process</h3>
                                <div id="processQuestions"></div>
                            </div>

                            <!-- SECTION 3: Technology Questions -->
                            <div class="form-section">
                                <h3><span class="section-number">3</span> Technology & Scale</h3>
                                <div id="techQuestions"></div>
                            </div>

                            <!-- SECTION 4: Pain Points -->
                            <div class="form-section">
                                <h3><span class="section-number">4</span> Pain Points & Goals</h3>
                                <div id="painQuestions"></div>
                            </div>

                            <!-- SUBMIT -->
                            <div style="text-align: center; margin-top: 40px;">
                                <button type="submit" class="btn" id="submitBtn" style="font-size: 1.1rem; padding: 15px 40px;">
                                    Get My Systems Diagnostic →
                                </button>
                            </div>
                        </form> 
                    <div id="sysStatusMessage" style="margin-top:20px;padding:15px;border-radius:4px;display:none;">
                </div> 
            </div> 
        </div> 
    </div> 
</section>

        <!-- HOW IT WORKS -->
        <section class="section-padding" style="background: var(--bg-offwhite);">
            <div class="container readable-column">
                <h2 style="text-align: center; margin-bottom: 50px;">How The Diagnostic Works</h2>
                
                <div class="grid-3">
                    <div class="process-step">
                        <div class="step-badge">1</div>
                        <h4>You Submit</h4>
                        <p>Answer 15 questions about your processes, technology, and pain points. Takes 5-10 minutes.</p>
                    </div>
                    
                    <div class="process-step">
                        <div class="step-badge">2</div>
                        <h4>AI + Human Analysis</h4>
                        <p>Our system analyzes patterns, validates data quality, and generates root cause insights.</p>
                    </div>
                    
                    <div class="process-step">
                        <div class="step-badge">3</div>
                        <h4>Get Your Report</h4>
                        <p>Receive detailed PDF via email with strategic recommendation and investment range.</p>
                    </div>
                </div>

                <div style="text-align: center; margin-top: 40px;">
                    <p><strong>Within 24-48 hours:</strong> Strategy call to review findings and discuss next steps</p>
                </div>
            </div>
        </section>

        <!-- RECOMMENDATION TYPES -->
        <section class="section-padding">
            <div class="container readable-column">
                <h2 style="text-align: center; margin-bottom: 20px;">What You'll Receive</h2>
                <p style="text-align: center; max-width: 600px; margin: 0 auto 40px; color: var(--text-muted);">
                    Based on your answers, we'll recommend one of three paths forward:
                </p>

                <div class="grid-3">
                    <div class="card recommendation-card build">
                        <h4>Build</h4>
                        <p><strong>₹7.5L - ₹20L | 3-6 weeks</strong></p>
                        <p style="font-size: 0.95rem;">Your process is sound. You need custom technology to automate and scale.</p>
                        <ul style="font-size: 0.9rem; padding-left: 20px; margin-top: 15px;">
                            <li>PWA development</li>
                            <li>Training & documentation</li>
                            <li>3 months support</li>
                        </ul>
                    </div>

                    <div class="card recommendation-card consult">
                        <h4>Consult First</h4>
                        <p><strong>₹25L - ₹45L | 6-10 weeks</strong></p>
                        <p style="font-size: 0.95rem;">Your process needs redesign before any technology investment.</p>
                        <ul style="font-size: 0.9rem; padding-left: 20px; margin-top: 15px;">
                            <li>Strategy & process design</li>
                            <li>Business model work</li>
                            <li>Implementation roadmap</li>
                        </ul>
                    </div>

                    <div class="card recommendation-card hybrid">
                        <h4>Hybrid</h4>
                        <p><strong>₹35L - ₹60L | 8-12 weeks</strong></p>
                        <p style="font-size: 0.95rem;">You need both: strategy to redesign the process, then technology to implement it.</p>
                        <ul style="font-size: 0.9rem; padding-left: 20px; margin-top: 15px;">
                            <li>Phase 1: Strategy</li>
                            <li>Phase 2: Custom build</li>
                            <li>Integrated approach</li>
                        </ul>
                    </div>
                </div>

                <div class="card" style="margin-top: 40px; background: var(--bg-offwhite); text-align: center;">
                    <h3 style="margin-bottom: 15px;">We Say No More Than Yes</h3>
                    <p>Diagnostic investment: <strong>₹2.5L – ₹4.5L</strong> — credited in full against any implementation engagement.</p> <p style="margin-bottom: 0;">We only build solutions that solve root problems. The diagnostic ensures you invest in the right solution — or tells you if you don't need software at all.</p>
                </div>
            </div>
        </section>

        <!-- TRUST SIGNALS -->
        <section class="section-padding" style="background: var(--bg-offwhite);">
            <div class="container readable-column text-center">
                <h2 style="margin-bottom: 40px;">Why Kernorigin?</h2>
                
                <div class="grid-3">
                    <div class="metric-card">
                        <span class="metric-val">24</span>
                        <p style="margin-top: 10px; color: var(--text-muted);">Years of Experience<br>Finding Root Causes</p>
                    </div>
                    <div class="metric-card">
                        <span class="metric-val">50+</span>
                        <p style="margin-top: 10px; color: var(--text-muted);">Transformations<br>That Stick</p>
                    </div>
                    <div class="metric-card">
                        <span class="metric-val">100%</span>
                        <p style="margin-top: 10px; color: var(--text-muted);">Root Cause Focused<br>No Band-Aids</p>
                    </div>
                </div>
            </div>
        </section>

        <!-- FAQ -->
        <section class="section-padding">
            <div class="container readable-column">
                <h2 style="text-align: center; margin-bottom: 40px;">Common Questions</h2>

                <div class="card" style="margin-bottom: 20px;">
                    <h4 style="margin-bottom: 10px;">Why should I pay for a diagnostic?</h4>
                    <p style="margin-bottom: 0;">Because 90% of software projects fail not because of bad code, but because they solve the wrong problem. The diagnostic ensures you invest in the RIGHT solution. It's ₹2.5L of insurance on a ₹20L+ decision.</p>
                </div>

                <div class="card" style="margin-bottom: 20px;">
                    <h4 style="margin-bottom: 10px;">What if I disagree with your recommendation?</h4>
                    <p style="margin-bottom: 0;">We explain our reasoning, and you decide. We're advisors, not salespeople. Some clients take the report and implement themselves. We only want clients who value our expertise.</p>
                </div>

                <div class="card" style="margin-bottom: 20px;">
                    <h4 style="margin-bottom: 10px;">How long until I get results?</h4>
                    <p style="margin-bottom: 0;">PDF report arrives via email within minutes of submission. Strategy call to review findings scheduled within 24-48 hours.</p>
                </div>

                <div class="card">
                    <h4 style="margin-bottom: 10px;">What if I don't move forward?</h4>
                    <p style="margin-bottom: 0;">You own the report. Use it however you want. We've had clients implement our recommendations themselves, and we're fine with that.</p>
                </div>
            </div>
        </section>

        <!-- FINAL CTA -->
        <section class="section-padding" style="background: var(--accent-navy); color: white; text-align: center;">
            <div class="container readable-column">
                <h2 style="color: white; margin-bottom: 20px;">Ready to Find Your Root Cause?</h2>
                <p style="margin-bottom: 30px; font-size: 1.1rem; color: rgba(255,255,255,0.9);">Stop automating broken processes. Start solving real problems.</p>
                <a href="#systemsDiagnosticForm" class="btn" style="background: white; color: var(--accent-navy);">Start Your Diagnostic</a>
            </div>
        </section>
    </main>

    <script src="config.js"></script>
    <script>
        let SYSTEMS_QUESTIONS = null;

        const CATEGORY_SECTIONS = {
            'Process': 'processQuestions',
            'Volume': 'processQuestions',
            'Tech': 'techQuestions',
            'Pain': 'painQuestions',
            'Performance': 'painQuestions',
            'Team': 'painQuestions',
            'Strategic': 'painQuestions'
        };

        window.onload = async function() {
            try {
                if (!API_CONFIG || API_CONFIG.URL.includes("YOUR_SCRIPT_ID")) {
                    throw new Error("Config not set");
                }

                const res = await fetch(`${API_CONFIG.URL}?action=systems_diagnostic_init`);
                const data = await res.json();
                
                if (data.error) throw new Error(data.error);

                SYSTEMS_QUESTIONS = data.questions;
                renderQuestions(data.questions);

            } catch(e) { 
                console.error("Failed to load:", e);
                document.querySelector('.diagnostic-form-wrapper').innerHTML = 
                    `<div class="card" style="text-align:center; padding:50px;">
                        <h3>Diagnostic System Offline</h3>
                        <p>We are currently updating our systems. Please try again in a few minutes or contact us directly.</p>
                    </div>`;
            }
        };

        function renderQuestions(questions) {
            const grouped = {};
            questions.forEach(q => {
                const section = CATEGORY_SECTIONS[q.category] || 'painQuestions';
                if (!grouped[section]) grouped[section] = [];
                grouped[section].push(q);
            });

            Object.keys(grouped).forEach(sectionId => {
                const container = document.getElementById(sectionId);
                if(container) {
                    grouped[sectionId].forEach(q => {
                        container.appendChild(createQuestionElement(q));
                    });
                }
            });
        }

        function createQuestionElement(q) {
            const wrapper = document.createElement('div');
            wrapper.className = 'question-item';

            const label = document.createElement('label');
            label.htmlFor = q.id;
            label.textContent = q.text + ' *';
            wrapper.appendChild(label);

            let input;
            
            if (q.type === 'select' || q.type === 'multiselect') {
                input = document.createElement('select');
                input.required = true;
                input.id = q.id;
                input.name = q.id;
                
                if (q.type === 'multiselect') {
                    input.multiple = true;
                    input.style.height = '100px';
                }
                
                const defaultOpt = document.createElement('option');
                defaultOpt.value = '';
                defaultOpt.textContent = 'Select...';
                defaultOpt.disabled = true;
                defaultOpt.selected = true;
                input.appendChild(defaultOpt);
                
                if (q.options && q.options !== 'NULL' && q.options !== '') {
                    const optionsArray = String(q.options).split('/');
                    optionsArray.forEach(opt => {
                        const option = document.createElement('option');
                        option.value = opt.trim();
                        option.textContent = opt.trim();
                        input.appendChild(option);
                    });
                }
                
                wrapper.appendChild(input);
                
                if (q.type === 'multiselect') {
                    const help = document.createElement('div');
                    help.className = 'question-help';
                    help.textContent = 'Hold Ctrl/Cmd (or tap on mobile) to select multiple';
                    wrapper.appendChild(help);
                }
                
            } else if (q.type === 'number') {
                input = document.createElement('input');
                input.type = 'number';
                input.step = '0.01';
                input.required = true;
                input.id = q.id;
                input.name = q.id;
                input.placeholder = 'Enter number';
                wrapper.appendChild(input);
                
            } else {
                input = document.createElement('textarea');
                input.required = true;
                input.id = q.id;
                input.name = q.id;
                input.placeholder = 'Describe...';
                input.rows = 3;
                wrapper.appendChild(input);
            }

            return wrapper;
        }

        async function submitSystemsDiagnostic(e) {
            e.preventDefault();
            
            const btn = document.getElementById('submitBtn');
            const originalText = btn.textContent;
            btn.textContent = 'Analyzing Data...';
            btn.disabled = true;

            try {
                const formData = new FormData(e.target);
                const answers = {};
                
                SYSTEMS_QUESTIONS.forEach(q => {
                    // Handle multiselect values
                    if (q.type === 'multiselect') {
                        const selectElement = e.target.elements[q.id];
                        const values = Array.from(selectElement.selectedOptions).map(opt => opt.value);
                        answers[q.id] = values.join(', ');
                    } else {
                        const value = formData.get(q.id);
                        if (value !== null && value !== '') {
                            answers[q.id] = value;
                        }
                    }
                });

                const payload = {
                    action: 'submit_systems_diagnostic',
                    apiKey: API_CONFIG.PUBLIC_KEY, // Security verification
                    name: formData.get('clientName'),
                    email: formData.get('clientEmail'),
                    business: formData.get('businessType'),
                    location: formData.get('location'),
                    answers: answers
                };

                const res = await fetch(API_CONFIG.URL, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify(payload)
                });

                const result = await res.json();

                if (result.error) throw new Error(result.error);

                if (result.status === 'success') { const sysStatus = document.getElementById('sysStatusMessage'); sysStatus.style.display = 'block'; sysStatus.style.backgroundColor = '#d1fae5'; sysStatus.style.color = '#065f46'; sysStatus.innerHTML = '<strong>✅ Systems Diagnostic Complete!</strong><br>Your detailed report has been emailed to <strong>' + formData.get('clientEmail') + '</strong>. We will contact you within 24 hours to schedule a strategy call.'; e.target.reset(); sysStatus.scrollIntoView({ behavior: 'smooth', block: 'center' });
                } else {
                    throw new Error(result.message || 'Unknown error');
                }

            } catch(error) { console.error('Error:', error); const sysStatus = document.getElementById('sysStatusMessage'); sysStatus.style.display = 'block'; sysStatus.style.backgroundColor = '#fee2e2'; sysStatus.style.color = '#991b1b'; sysStatus.textContent = '❌ Submission failed: ' + error.message + '. Please try again or contact us directly.';
            } finally {
                btn.textContent = originalText;
                btn.disabled = false;
            }
        }

        // Smooth scroll
        document.querySelectorAll('a[href^="#"]').forEach(anchor => {
            anchor.addEventListener('click', function (e) {
                e.preventDefault();
                const target = document.querySelector(this.getAttribute('href'));
                if (target) target.scrollIntoView({ behavior: 'smooth' });
            });
        });
    </script>
        <footer>
        <div class="container footer-wrapper">
            <div>
                <div class="footer-logo">KERNORIGIN</div>
                <p style="margin-top: 15px; font-size: 0.9rem;">
                    Since 2001 (formerly Value Drive Consulting)<br>
                    25 years finding root causes globally.<br>
                    50+ transformations that stick.
                </p>
            </div>
            <div class="footer-links">
                <a href="index.html">Home</a>
                <a href="diagnostics.html">Diagnostics</a>
                <a href="partners.html">Partners</a>
                <a href="insights.html">Insights</a>
                <a href="contact.html">Contact</a>
            </div>
        </div>
        <div class="container" style="padding-top: 20px; border-top: 1px solid var(--border-light); font-size: 0.8rem; color: #999;">
            &copy; 2026 Kernorigin. All rights reserved.
        </div>
    </footer>
    <script src="mobile-menu.js"></script>
</body>
</html>